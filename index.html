<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pak Database Search</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    body { margin:0; min-height:100vh; background:linear-gradient(135deg,#000000,#003300); display:flex; align-items:center; justify-content:center; color:#eaffea; padding:20px;}
    .container { width:100%; max-width:520px; background:rgba(0,0,0,0.7); border-radius:16px; padding:25px; border:1px solid #00ff88; }
    h1 { text-align:center; margin-bottom:20px; font-weight:600; color:#00ff88; }
    .search-box { display:flex; gap:10px; margin-bottom:10px; }
    input { flex:1; padding:12px; border-radius:8px; border:1px solid #00ff88; outline:none; font-size:15px; background:#000; color:#eaffea; }
    button { padding:12px 18px; border-radius:8px; border:none; cursor:pointer; background:#00ff88; color:#000; font-size:15px; font-weight:600; transition:transform 0.2s ease, box-shadow 0.2s ease; }
    button:hover { transform:translateY(-2px); box-shadow:0 8px 20px rgba(0,255,136,0.4); }
    .result { background:rgba(0,0,0,0.6); border-radius:12px; padding:15px; display:none; animation:fadeIn 0.4s ease; border:1px solid #00ff88; margin-top:10px; }
    .error { color:#ff8080; text-align:center; display:none; margin-top:10px; }
    #loading { display:none; text-align:center; margin:10px 0; color:#00ff88; font-weight:600; }
    h3 { margin-top:20px; color:#00ff88; }
    #history { font-size:13px; background:rgba(0,0,0,0.5); padding:10px; border-radius:8px; border:1px solid #00ff88; max-height:120px; overflow-y:auto; }
    .banner-ad { margin:15px 0; text-align:center; }
    .banner-ad iframe { width:100% !important; max-width:468px; height:60px !important; display:block; margin:0 auto; }
    .ad-block { margin-top:15px; text-align:center; }
    footer { text-align:center; margin-top:18px; font-size:12px; }
    footer a { display:inline-block; padding:12px 18px; margin:8px 6px; font-size:14px; font-weight:600; color:#00ff88; background:rgba(0,255,136,0.15); border:1px solid #00ff88; border-radius:12px; text-decoration:none; transition:all 0.25s ease; }
    footer a:hover { background:#00ff88; color:#000; box-shadow:0 6px 18px rgba(0,255,136,0.5); transform:translateY(-2px); }
    @keyframes fadeIn { from {opacity:0; transform:translateY(8px);} to {opacity:1; transform:translateY(0);} }
    @media (max-width:480px){ .search-box { flex-direction:column; } .search-box button { width:100%; margin-top:10px; } }
  </style>
</head>

<body>
<div class="container">
  <h1>ðŸ‡µðŸ‡° Pak Database Search</h1>

  <div class="search-box">
    <input id="number" placeholder="Enter Mobile Number">
    <button onclick="handleSearch()">Search</button>
  </div>

  <div id="loading">Loading...</div>
  <div class="error" id="error">No record found or API error.</div>

  <div class="result" id="result">
    <p><b>Mobile:</b> <span id="mobile"></span></p>
    <p><b>Name:</b> <span id="name"></span></p>
    <p><b>CNIC:</b> <span id="cnic"></span></p>
    <p><b>Address:</b> <span id="address"></span></p>
  </div>

  <!-- Banner Ad -->
  <div class="banner-ad">
    <script type="text/javascript">
      atOptions = {
        'key':'21fa2cabec3a038e55dc653ba03a4afa',
        'format':'iframe','height':60,'width':100,'params':{}
      };
    </script>
    <script src="https://www.highperformanceformat.com/21fa2cabec3a038e55dc653ba03a4afa/invoke.js"></script>
  </div>

  <h3>ðŸ”Ž Search History</h3>
  <div id="history">No searches yet</div>

  <!-- Native Ad -->
  <div class="ad-block">
    <script async data-cfasync="false" src="https://pl28379782.effectivegatecpm.com/300138f18b9ecba409578858202fe959/invoke.js"></script>
    <div id="container-300138f18b9ecba409578858202fe959"></div>
  </div>

  <footer>
    Pak Database â€¢ Tech AD <br><br>
    Channels:<br>
    <a href="https://t.me/tech_ad2" target="_blank">Telegram Channel 1</a>
    <a href="https://t.me/armods7" target="_blank">Telegram Channel 2</a>
  </footer>
</div>

<script>
  /* ðŸ”¹ POPUNDER: 12 hours max 2 */
  function firePopunderLimited() {
    const key='pop_logs', now=Date.now(), limit=12*60*60*1000;
    let logs=JSON.parse(localStorage.getItem(key))||[];
    logs=logs.filter(t=>now-t<limit);
    if(logs.length<2){
      const s=document.createElement('script');
      s.src="https://pl28379836.effectivegatecpm.com/9f/fd/76/9ffd76e4e7cf3cf7f2f4689a221d70e3.js";
      s.async=true;
      document.body.appendChild(s);
      logs.push(now);
      localStorage.setItem(key,JSON.stringify(logs));
    }
  }

  async function handleSearch() {
    firePopunderLimited();
    document.getElementById('loading').style.display='block';
    await searchData();
    document.getElementById('loading').style.display='none';
  }

  async function searchData() {
    const num=document.getElementById('number').value.trim();
    const error=document.getElementById('error');
    const result=document.getElementById('result');
    error.style.display=result.style.display='none';

    if(!num){ error.innerText="Enter number"; error.style.display='block'; return; }

    try {
      // ðŸ”’ API via serverless function
      const res=await fetch(`/api/search?num=${num}`);
      const data=await res.json();

      if(!data||!data.length) throw 1;

      mobile.innerText=data[0].Mobile;
      name.innerText=data[0].Name;
      cnic.innerText=data[0].CNIC;
      address.innerText=data[0].ADDRESS;

      // Save & load history
      let h=JSON.parse(localStorage.getItem('history'))||[];
      h.unshift(num+' â€” '+new Date().toLocaleString());
      localStorage.setItem('history',JSON.stringify(h.slice(0,10)));
      document.getElementById('history').innerHTML=h.map(x=>'â€¢ '+x).join('<br>');

      result.style.display='block';
    } catch {
      error.innerText="No record or API error";
      error.style.display='block';
    }
  }

  // Load history on page load
  let h=JSON.parse(localStorage.getItem('history'))||[];
  document.getElementById('history').innerHTML=h.length?h.map(x=>'â€¢ '+x).join('<br>'):'No searches yet';
</script>
</body>
</html>